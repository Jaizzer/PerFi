@app.route("/modify_account", methods=["POST", "GET"])
@login_required
def modify_account():
    
    # Load table to edit.
    table_to_edit = session["table_to_edit"]
    
    # Load the account to edit.
    current_account = session["current_account"]

    # Load the amount.
    current_account_balance = db.execute("SELECT balance FROM ? WHERE name = ?", table_to_edit, current_account)[0]["balance"]

    
    if request.method == "POST":
        
        # Get the new decription.
        new_account = request.form.get("new_account")

        # Get the new decription.
        new_balance = request.form.get("account_balance")

        # Process the user's input for the new account.
        if new_account:
            
            # Check the existence of username in the database.
            existence = db.execute("SELECT name FROM ? where name = ?", table_to_edit, new_account)
            
            # Name already exists.
            if existence:
                return apology(f"{new_account} already exists!")
            
            # Name does not exist.
            else:
                
                # Update account.
                db.execute("UPDATE ? SET name = ? WHERE name = ?",  table_to_edit, new_account, current_account)
                    
            # Set the current account to the new account.
            current_account = new_account

        # Update the element's current amound if the user input one.
        if new_account_balance and table_type != "description":
            db.execute("UPDATE ? SET balance = ? WHERE name = ?",  table_to_edit, new_account_balance, current_element_name)
    
            
        # Redirect back to edit menu.          
        return redirect("/edit_account")

    else:
        
        return render_template("modify_account.html", current_account=current_account, current_account_balance=current_account_balance)
